/*
 * Segmented-control-specific utilities
 */

@mixin gl-btn-gl-segmented-button-first {
  box-shadow:
    inset 0 #{$gl-border-size-1} 0 0 $gray-200,
    inset 0 -#{$gl-border-size-1} 0 0 $gray-200,
    inset #{$gl-border-size-1} 0 0 0 $gray-200;
}

@mixin gl-btn-gl-segmented-button-last {
  box-shadow:
    inset 0 #{$gl-border-size-1} 0 0 $gray-200,
    inset 0 -#{$gl-border-size-1} 0 0 $gray-200,
    inset -#{$gl-border-size-1} 0 0 0 $gray-200;
}

@mixin gl-btn-gl-segmented-button-focus($color) {
  box-shadow:
    $focus-ring,
    inset 0 0 0 $gl-border-size-2 $color;
}

.btn-group.gl-segmented-control {
  .btn:not(:first-child),
  .btn:not(:last-child) {
    &.active,
    &.focus,
    &:hover:not(.disabled) {
      @apply gl-rounded-base;
    }
  }
}

@if $feature-button-border {
  .gl-segmented-control {
    label:not(.disabled) {
      @apply gl-cursor-pointer;
    }

    .btn-gl-segmented-button {
      @apply gl-text-base;
      @apply gl-leading-normal;
      @apply gl-text-gray-900;
      @apply gl-fill-current;
      @apply gl-bg-gray-10;
      border-color: $gray-200;

      &:not(:first-child) {
        border-left-color: transparent;
      }

      &:not(:last-child) {
        border-right-color: transparent;
      }

      &:hover {
        border-color: $gray-400;
        @apply gl-bg-gray-50;
      }

      &.focus {
        @apply gl-z-1;
        border-color: $gray-400;
        @apply gl-focus;
        @apply gl-bg-gray-50;
      }

      &.active {
        @apply gl-z-2;
        border-color: $gray-400;
        box-shadow: inset 0 0 0 $gl-border-size-1 $gray-400;
        @apply gl-bg-white;

        &:hover {
          box-shadow: inset 0 0 0 $gl-border-size-1 $gray-400;
          @apply gl-bg-gray-50;
        }

        &.focus,
        &.focus:hover {
          border-color: $gray-400;
          @apply gl-focus;
          @apply gl-bg-gray-50;
        }
      }

      &:focus-within {
        @apply gl-focus;
      }

      &.disabled,
      &[disabled],
      &.disabled:hover,
      &[disabled]:hover {
        @apply gl-text-gray-400;
        border-color: $gray-200;
        @apply gl-z-0;
        @apply gl-cursor-not-allowed;

        &:first-child {
          border-right-color: transparent;
        }

        &:last-child {
          border-left-color: transparent;
        }
      }
    }
  }
} @else {
  .gl-segmented-control {
    label:not(.disabled) {
      @apply gl-cursor-pointer;
    }

    .btn-gl-segmented-button {
      @apply gl-text-base;
      @apply gl-leading-normal;
      @apply gl-text-gray-900;
      @apply gl-fill-current;
      @apply gl-bg-gray-10;
      box-shadow:
        inset 0 #{$gl-border-size-1} 0 0 $gray-200,
        inset 0 -#{$gl-border-size-1} 0 0 $gray-200;

      &:first-child {
        @include gl-btn-gl-segmented-button-first;
      }

      &:last-child {
        @include gl-btn-gl-segmented-button-last;
      }

      &:hover {
        box-shadow: inset 0 0 0 $gl-border-size-2 $gray-400;
        @apply gl-bg-gray-50;
      }

      &.focus {
        @apply gl-z-1;
        @include gl-btn-gl-segmented-button-focus($gray-400);
        @apply gl-bg-gray-50;
      }

      &.active {
        @apply gl-z-2;
        box-shadow: inset 0 0 0 $gl-border-size-2 $gray-300;
        @apply gl-bg-white;

        &:hover {
          box-shadow: inset 0 0 0 $gl-border-size-2 $gray-400;
          @apply gl-bg-gray-50;
        }

        &.focus,
        &.focus:hover {
          @include gl-btn-gl-segmented-button-focus($gray-400);
          @apply gl-bg-gray-50;
        }
      }

      &:focus-within {
        @apply gl-focus;
      }

      &.disabled,
      &[disabled],
      &.disabled:hover,
      &[disabled]:hover {
        @apply gl-text-gray-400;
        box-shadow:
          inset 0 #{$gl-border-size-1} 0 0 $gray-200,
          inset 0 -#{$gl-border-size-1} 0 0 $gray-200;
        @apply gl-z-0;
        @apply gl-cursor-not-allowed;

        &:first-child {
          @include gl-btn-gl-segmented-button-first;
        }

        &:last-child {
          @include gl-btn-gl-segmented-button-last;
        }
      }
    }
  }
}
